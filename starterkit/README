============== -*- outline -*- ==============

   Renesas StarterKit (H3/M3/M3N) BSP ROM Writer

2021/09/02	Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
=============================================

-------------------------------
* What is Renesas StarterKit ?
-------------------------------

	See here, and search "R-Car Starter Kit"

		https://elinux.org/R-Car

-------------------------------
* Special Thanks
-------------------------------

	Special Thanks to Magnus Damm.
	The original code was his do_xls2 script

	Special Thanks to Shimoda-san, Goda-san.
	The original code was his TeraTerm Macro

-------------------------------
* Which OS are supported as Host ?
-------------------------------

	Linux
	Windows (TeraTerm)

-------------------------------
* How to get ROM ?
-------------------------------

	You have some informations / helpers

	Quick Start
		https://elinux.org/R-Car/Boards/H3SK#Quick_Start_How_To
		https://elinux.org/R-Car/Boards/M3SK#Quick_Start_How_To
		https://elinux.org/R-Car/Boards/M3NSK#Quick_Start_How_To

	Yocto Maker
		https://github.com/morimoto/renesas-yocto-maker
		https://gitlab.com/morimoto.kuninori/renesas-yocto-maker

		ex) In case of "H3" with "Yocto v5.1.0"

			> git clone https://github.com/morimoto/renesas-yocto-maker
			         or https://gitlab.com/morimoto.kuninori/renesas-yocto-maker
			> cd renesas-yocto-maker
			> yocto-make -b 5.1.0 h3ulcb
			> tar -jxf yocto-5.1.0-h3ulcb-xxxx-bin.tar.bz2

	Required ROM are almost like these

		bootparam_sa0.srec
		bl2-h3ulcb.srec
		cert_header_sa6.srec
		bl31-h3ulcb.srec
		tee-h3ulcb.srec
		u-boot-elf-h3ulcb.srec

-------------------------------
* How to know the connected tty ?
-------------------------------

	Connect your PC and StarterKit by USB cable, and check it by

		> dmesg | grep ttyUSB | tail
	   or
		> ls -l /dev/serial/by-id/*

-------------------------------
* WS1.x Boards on H3 is not supported
-------------------------------

	Please check your board at

		https://elinux.org/R-Car/Boards/H3SK#Hardware

-------------------------------
* How to use it on Linux ?
-------------------------------

**  Preparation

	You need "expect", "minicom", "git" command.
	If you are using Ubuntu, you can install these by

		> sudo apt install expect minicom git

	You need make first.

		> cd ${renesas-bsp-rom-writer}/starterkit
		> make

**  rom_writer

	rom_writer soc ver mode tty

	soc:	h3/m3/m3n
	ver:	Yocto version
			5.1.0
	mode:	sw/cpld
		sw   : see below Half-Auto
		cpld : see below Full-Auto
	tty:	/dev/ttyUSBx
		see above "How to know the connected tty ?"

**  Half-Auto

	You need to use "Half-Auto" if your board doesn't have U-boot yet.
	                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	goto ROM dir, and call rom_writer with "sw" option from there.

	ex) In case of H3, and Yocto v5.1.0 case

		> cd ${rom-dir}
		> ${renesas-bsp-rom-writer}/starterkit/linux/rom_writer h3 5.1.0 sw /dev/ttyUSBx

**  Full-Auto

	You can use "Full-Auto" if your board have U-boot.
	                           ^^^^^^^^^^^^^^^^^^^^^^
	goto ROM dir, and call rom_writer with "cpld" option from there.

	ex) In case of H3, and Yocto v5.1.0 case

		> cd ${rom-dir}
		> ${renesas-bsp-rom-writer}/starterkit/linux/rom_writer h3 5.1.0 cpld /dev/ttyUSBx

-------------------------------
* How to use it on Windows ?
-------------------------------

**  Preparation

	You need "TeraTerm". See here and get it

		https://ttssh2.osdn.jp/index.html.ja
		https://ttssh2.osdn.jp/index.html.en

	You need mot file if use "Full-Auto" mode, but Windows user can't create it by yours.
	Please get it from Linux user and set it below. Linux user can find it at same place.

		${renesas-bsp-rom-writer}/starterkit/AArch32_Flash_writer_SCIF_DUMMY_CERT_E6300400_ULCB.mot

**  Usage

	You need to use "Half-Auto" if your board doesn't have U-boot yet.
	                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	You can use "Full-Auto" if your board have U-boot.
	                           ^^^^^^^^^^^^^^^^^^^^^^

	- Start TeraTerm
	- Open Macro via
		[Menu] - [Control] - [Macro]
		${renesas-bsp-rom-writer}/starterkit/windows/rom_writer.ttl
	- Follow the Question
	  Then, you need to select ROM folder

-------------------------------
* FAQ
-------------------------------
**  It doesn't work for me ?

	Does your Renesas StarterKit U-boot indicate prompt ("=>") and is waiting command ?
	renesas-bsp-rom-writer is waiting prompt, and will send the command.
	Your U-Boot need to wait the command by prompt ("=>").

**  It stops after "please send !" ?

	No worry !
	It is sending "flash writer" to the board, and it takes a time.
	You need to is just "waiting patiently" :)
