============== -*- outline -*- ==============

   Renesas StarterKit (H3/M3/M3N) BSP ROM Writer

2021/09/02	Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
=============================================

-------------------------------
* What is Renesas StarterKit ?
-------------------------------

	See here, and search "R-Car Starter Kit"

		https://elinux.org/R-Car

-------------------------------
* How to get ROM ?
-------------------------------

	You have some informations / helpers

	Quick Start
		https://elinux.org/R-Car/Boards/H3SK#Quick_Start_How_To
		https://elinux.org/R-Car/Boards/M3SK#Quick_Start_How_To
		https://elinux.org/R-Car/Boards/M3NSK#Quick_Start_How_To

	Yocto Maker
		https://github.com/morimoto/renesas-yocto-maker
		https://gitlab.com/morimoto.kuninori/renesas-yocto-maker

		ex) In case of "H3" with "Yocto v5.1.0"

			> git clone https://github.com/morimoto/renesas-yocto-maker
			         or https://gitlab.com/morimoto.kuninori/renesas-yocto-maker
			> cd renesas-yocto-maker
			> bin/yocto-make-v5.1.0 -b h3ulcb
			> tar -jxf yocto-v5.1.0-h3ulcb-xxxx-bin.tar.bz2

	Required ROM are almost like these

		bootparam_sa0.srec
		bl2-h3ulcb.srec
		cert_header_sa6.srec
		bl31-h3ulcb.srec
		tee-h3ulcb.srec
		u-boot-elf-h3ulcb.srec

-------------------------------
* Where to get renesas-bsp-rom-writer ?
-------------------------------

	https://github.com/morimoto/renesas-bsp-rom-writer
	https://gitlab.com/morimoto.kuninori/renesas-bsp-rom-writer

-------------------------------
* How to know the connected tty ?
-------------------------------

	Connect your PC and StarterKit by USB cable, and check it by

		> dmesg | grep ttyUSB | tail
	   or
		> ls -l /dev/serial/by-id/*

-------------------------------
* WS1.x Boards on H3/M3 are not supported
-------------------------------

	Please check your board at

		https://elinux.org/R-Car/Boards/H3SK#Hardware
		https://elinux.org/R-Car/Boards/M3SK#Hardware

-------------------------------
* Preparation
-------------------------------

	You need "expect" and "minicom" command
	If you are using Ubuntu, you can install these by

		> sudo apt install expect minicom

-------------------------------
* How to use it (Half-Auto) ?
-------------------------------

	You need to use "Half-Auto" if your board doesn't have U-boot yet.
	                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	goto ROM dir, and call "sw" with ttyUSB.
	You can see H3/M3/M3N there

	ex) In case of H3, and Yocto v5.1.0 case

		> cd ${rom-dir}
		> ${renesas-bsp-rom-writer}/starterkit/H3/yocto_v5.1.0/sw  /dev/ttyUSBx
		                                                      ^^^^

-------------------------------
* How to use it (Full-Auto) ?
-------------------------------

	You can use "Full-Auto" if your board have U-boot.
	                           ^^^^^^^^^^^^^^^^^^^^^^

	You need to have "Renesas flash_writer".
	goto to ${renesas-bsp-rom-writer}/starterkit, and run "make"

		> cd ${renesas-bsp-rom-writer}/starterkit
		> make

	goto ROM dir, and call "cpld" with ttyUSB.
	You can see H3/M3/M3N there

	ex) In case of H3, and Yocto v5.1.0 case

		> cd ${rom-dir}
		> ${renesas-bsp-rom-writer}/starterkit/H3/yocto_v5.1.0/cpld  /dev/ttyUSBx
		                                                      ^^^^^^

**  It doesn't work for me ?

	Does your Renesas StarterKit U-boot indicate prompt ("=>") and is waiting command ?
	renesas-bsp-rom-writer is waiting prompt, and will send the command.
	Your U-Boot need to wait the command by prompt ("=>").

**  It stops after "please send !" ?

	No worry !
	It is sending "flash writer" to the board, and it takes a time.
	You need to is just "waiting patiently" :)
