============== -*- outline -*- ==============

   Renesas Salvator-XS (H3/M3/M3N) BSP ROM Writer

2021/10/19	Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
=============================================

-------------------------------
* What is Renesas Salvator-XS ?
-------------------------------

	See here
		https://elinux.org/R-Car/Boards/Salvator-XS

	[Note]
	Salvator-X is not supported
	        ^^^
-------------------------------
* Which Host OS are supported ?
-------------------------------

	Linux
	Windows (TeraTerm)

-------------------------------
* How to know the connected tty ?
-------------------------------

	Connect your PC and StarterKit by USB cable, and check it by

		> dmesg | grep ttyUSB | tail
	   or
		> ls -l /dev/serial/by-id/*

-------------------------------
* Preparation
-------------------------------

	You need "expect", "minicom", "git" command.
	If you are using Ubuntu, you can install these by

		> sudo apt install expect minicom git

	If you used previous version ROM Writer,
	maybe you need "make clean" for Linux, and make

		> cd ${renesas-bsp-rom-writer}/salvator/linux
		> make clean
		> make

-------------------------------
* How to know my board is 4Gbyte or 8Gbyte ?
-------------------------------

	Unfortunately, the only way to know your board is 4Gbyte or 8Gbyte
	is that depends on how you got it.

	Alternatively, write 4Gbyte bootloader (small one) fist,
	run and check Memory Size.

-------------------------------
* How to use it on Linux ?
-------------------------------

**  rom_writer

	rom_writer [a:y:h] <soc> <tty>

	-y:	write Yocto
		5.5.0
		5.1.0
		4.1.0
		3.21.0
	-a:	write Android
		11_1.1
		11_1.0
		10_2.0
		10_1.2
	-h:	[Half-Auto] mode.
		[Auto]      mode is default.
	soc:	h3_4g
		h3_8g
		m3_4g
		m3_8g
		m3n
	tty:	/dev/ttyUSBx
		see above "How to know the connected tty ?"

	[Half-Auto mode]
	Need manual Dip-Switch on both Front/Back side.

	[Auto mode]
	Need manual Dip-Switch on Front side.
	You need run "make" at salvator/linux once.

	One note is that it looks stop after "please send !", but it is sending
	Mot to board. No worry. You need is just waiting.

	[Note]
	This command should be called from ROM dir which has Yocto/Android binarys.

	ex)
	Yocto 5.5.0 for H3-8G Salvator-XS board by Half-Auto mode.
	^^^^^^^^^^^     ^^^^^                      ^^^^^^^^^
		> cd ${rom-dir}
		> ${renesas-bsp-rom-writer}/salvator/linux/rom_writer -y 5.5.0 -h h3_8g /dev/ttyUSB0

	ex)
	Android 10_2.0 for M3-4G Salvator-XS board by Auto mode
	^^^^^^^^^^^^^^     ^^^^^                      ^^^^
		> cd ${renesas-bsp-rom-writer}/salvator/linux/
		> make
		> cd ${rom-dir}
		> ${renesas-bsp-rom-writer}/salvator/linux/rom_writer -a 10_2.0 m3_4g /dev/ttyUSB0

**  android_setup

	android_setup <mac> <tty>

	mac:	Ether Mac address
		Renesas board has it on Ether socket.
		ex)
			12:34:56:78:9a:bc
	tty:	/dev/ttyUSBx
		see above "How to know the connected tty ?"

	[Note]
	This command should be called from ROM dir which has Android binarys.
	This command uses "sudo". you need belong to sudo group.
	During this command, Ubuntu might has below message box. But you can ignore it.

		-----------------------------------
		Unable to mount USB download gadget
		can't open MTP device xxx
		-----------------------------------

	ex)
		> cd ${android-rom-dir}
		> ${renesas-bsp-rom-writer}/salvator/linux/android_setup 12:34:56:78:9a:bc /dev/ttyUSBx

-------------------------------
* How to use it on Windows ?
-------------------------------

**  Preparation

	You need "TeraTerm". See here and get it

		https://ttssh2.osdn.jp/index.html.ja
		https://ttssh2.osdn.jp/index.html.en

	You need mot file if use "Auto" mode, but Windows user can't create it by yourself.
	Please get it from Linux user, and set it below.

	Linux:
		${renesas-bsp-rom-writer}/salvator/linux/script/flash_writer/AArch64_output/AArch64_Flash_writer_SCIF_DUMMY_CERT_E6300400_salvator-x.mot
	Windows:
		${renesas-bsp-rom-writer}/salvator/AArch64_Flash_writer_SCIF_DUMMY_CERT_E6300400_salvator-x.mot

**  Usage

	- Start TeraTerm
	- Open Macro via
		[Menu] - [Control] - [Macro]
		${renesas-bsp-rom-writer}/salvator/windows/rom_writer.ttl
	- Follow the Question
	  Then, you need to select ROM folder
